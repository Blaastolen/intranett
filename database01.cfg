[buildout]
extends =
    cfgs/base.cfg
    cfgs/sources.cfg

parts =
    relpy
    pack-conf
    pack-crontab

[relpy]
recipe = zc.recipe.egg
eggs =
    RelStorage
    psycopg2

[pack-conf]
recipe = collective.recipe.template
input = inline:
    <relstorage>
        shared-blob-dir false
        blob-dir ${buildout:directory}/var/blobcache/test
        blob-cache-size 128mb
        <postgresql>
            dsn dbname='test' user='zodbuser' host='localhost' password='KCn25qUDfRoO}aVn'
        </postgresql>
    </relstorage>
output = ${buildout:directory}/etc/pack.conf

[pack-crontab]
recipe = z3c.recipe.usercrontab
times = 47 1 * * *
command = ${buildout:bin-directory}/zodbpack -d 7 ${buildout:directory}/etc/pack.conf
