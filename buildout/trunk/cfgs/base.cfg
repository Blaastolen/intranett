[buildout]
extends = versions.cfg

allow-picked-versions = false
versions = versions
unzip = true

develop =
    src/intranett.policy
    src/intranett.theme

base-parts =
    zeo
    backup
    zopepy
    supervisor
    supervisor-conf

prod-environment =
    PTS_LANGUAGES no
    zope_i18n_allowed_languages no
    zope_i18n_compile_mo_files true
    CATALOGQUERYPLAN intranett.policy.queryplan.queryplan

[zeo]
recipe = plone.recipe.zeoserver
zeo-address = 127.0.0.1:8001
blob-storage = ${buildout:directory}/var/blobstorage

[backup]
recipe = collective.recipe.backup
keep = 7

[instance-base]
recipe = plone.recipe.zope2instance
zodb-cache-size = 10000
environment-vars =
    ${buildout:prod-environment}
eggs =
    intranett.policy
zcml =
    intranett.policy-meta
    intranett.policy
    intranett.policy-overrides

[zopepy]
recipe = zc.recipe.egg
interpreter = zopepy
scripts = zopepy

[supervisor]
recipe = zc.recipe.egg
eggs = supervisor

[supervisor-conf]
recipe = collective.recipe.template
input = ${buildout:directory}/templates/supervisord.conf
output = ${buildout:directory}/etc/supervisord.conf
